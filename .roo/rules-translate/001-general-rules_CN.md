# 1. 支持的语言和位置

- 将所有字符串本地化到以下区域设置文件：ca, de, en, es, fr, hi, it, ja, ko, pl, pt-BR, tr, vi, zh-CN, zh-TW
- VSCode扩展有两个主要需要本地化的区域：
    - 核心扩展：src/i18n/locales/（扩展后端）
    - WebView UI：webview-ui/src/i18n/locales/（用户界面）

# 2. 语调、风格和语气

- 所有翻译一律使用非正式语言（例如德语中用"du"而非"Sie"）
- 保持直接和简洁的风格，反映原文的语气
- 认真考虑源语言和目标语言中的口语表达和惯用语
- 力求文化相关且有意义的翻译，而非逐字翻译
- 保留原始内容的个性和语调
- 使用目标语言使用者感觉自然的语言
- 不要翻译"token"这个词，因为它在英语中有特定含义，所有语言都能理解
- 不要翻译通常在目标语言中使用英语的特定领域词汇（尤其是"Prompt"等技术术语）

# 3. 核心扩展本地化（src/）

- 位于src/i18n/locales/
- 核心源代码中并非所有字符串都需要国际化 - 只有面向用户的消息需要
- 内部错误消息、调试日志和面向开发者的消息应保持英语
- t()函数与命名空间一起使用，如'core:errors.missingToolParameter'
- 修改插值变量时要小心；它们必须在所有翻译中保持一致
- formatResponse.ts中的某些字符串由于是内部的，有意不进行国际化
- 更新core.json中的字符串时，保持所有现有的插值变量
- 在进行更改前检查代码库中的字符串用法，确保不会破坏功能

# 4. WEBVIEW UI本地化（webview-ui/src/）

- 位于webview-ui/src/i18n/locales/
- 使用标准React i18next模式与useTranslation钩子
- 所有用户界面字符串都应该国际化
- 对于有嵌入组件的文本，始终使用带命名组件的Trans组件

<Trans>示例：

`"changeSettings": "您可以随时在<settingsLink>设置</settingsLink>底部更改此项",`

```
  <Trans
    i18nKey="welcome:telemetry.changeSettings"
    components={{
      settingsLink: <VSCodeLink href="#" onClick={handleOpenSettings} />
    }}
  />
```

# 5. 技术实现

- 使用命名空间逻辑组织翻译
- 使用i18next的内置功能处理复数形式
- 使用{{variable}}语法正确实现变量插值
- 不包含defaultValue。`en`翻译是后备选项
- 编辑现有翻译文件时始终使用apply_diff而非write_to_file（更快更可靠）
- 使用apply_diff时，仔细识别要编辑的确切JSON结构，避免语法错误
- 占位符（如{{variable}}）必须与英文源保持完全相同，以维护代码集成并防止语法错误

# 6. 工作流程和方法

- 首先添加或修改英文字符串，然后在翻译成所有其他语言前请求确认
- 对每个本地化任务使用此过程：
    1. 确定字符串在UI/代码库中的位置
    2. 了解字符串的上下文和目的
    3. 首先更新英文翻译
    4. 为所有其他支持的语言创建适当的翻译
    5. 使用缺失翻译脚本验证您的更改
- 如果英文源字符串不完整（"请查看此..."），请标记或评论，以避免翻译不完整或不清晰
- 对于UI元素，区分：
    - 按钮标签：使用简短的命令式命令（"保存"、"取消"）
    - 工具提示文本：可以稍微描述性强一些
- 保留原始视角：如果文本是用户对软件发出的命令，确保翻译保持这种方向，避免使其听起来像是系统对用户的指示

# 7. 避免的常见陷阱

- 在正式和非正式寻址样式之间切换 - 始终保持非正式（德语中用"du"而非"Sie"）
- 翻译或更改应保持英语的技术术语和品牌名称
- 修改或删除像{{variable}}这样的占位符 - 这些必须保持相同
- 翻译在目标语言中通常使用英语的特定领域术语
- 改变指令或错误消息的含义或细微差别
- 忘记在整个翻译中保持一致的术语

# 8. 质量保证

- 在所有翻译中保持一致的术语
- 尊重翻译文件的JSON结构
- 注意占位符并在翻译中保留它们
- 在翻译到可能需要更多字符的语言时，注意UI元素中的文本长度
- 当同一字符串有不同含义时，使用上下文感知翻译
- 始终通过运行缺失翻译脚本验证您的翻译工作：
    ```
    node scripts/find-missing-translations.js
    ```
- 解决脚本识别的任何缺失翻译，确保所有区域设置的完整覆盖

# 9. 翻译者清单

- ✓ 始终使用非正式语气（德语用"du"而非"Sie"）
- ✓ 与英文源完全一样保留所有占位符
- ✓ 与现有翻译保持一致的术语
- ✓ 在适当情况下保持技术术语和品牌名称不变
- ✓ 保留原始视角（用户→系统 vs 系统→用户）
- ✓ 根据UI上下文（按钮vs工具提示）适当调整文本 